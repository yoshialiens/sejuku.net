!function(t){t(function(){var o=t("#nav"),n=o.offset().top,r=o.height(),e=function(){return t(window).scrollTop()>=n},i={};isections=t("section"),i.mark=function(n){o.find(".scroll").removeClass("on"),n&&t("a[href=#"+n+"]").addClass("on")},i.getTargetClass=function(o){var n=o.split(/\s+/);return t.grep(n,function(t){return"section"!==t})[0]},i.markAuto=function(){var o=t(window).scrollTop()+t(window).height()/2,n=isections.filter(function(){var n=t(this).offset().top;return o>n}).map(function(){return i.getTargetClass(t(this).attr("class"))}).get(-1);i.mark(n)},i.markAuto(),t(window).scroll(function(){o.toggleClass("fixed",e()),i.markAuto()}),t(".scroll").click(function(o){o.preventDefault();var n=this.href,s=n.split("#"),a=s[1],c=t("#"+a).offset(),l=c.top-(e()?0:r),f=e()||"introduction"!==a?1e3:300;t("html, body").animate({scrollTop:l},f),i.mark(a)})})}(jQuery);